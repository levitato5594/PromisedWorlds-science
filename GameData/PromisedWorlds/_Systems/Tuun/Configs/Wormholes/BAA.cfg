@Kopernicus:FOR[PromisedWorlds]:HAS[@PromisedWorldsSettings:HAS[~Wormholes[?alse]]]:NEEDS[KopernicusExpansion]
{
	Body
	{
		name = Borgal's Anomaly A
		identifier = PromisedWorlds/Borgal's Anomaly A
		cacheFile = PromisedWorlds/Cache/BAA.bin
		Tag = Tuun_Tuun_Wormhole
		Template
		{
			name = Minmus
			removeAllPQSMods = true
		}
		Properties
		{
			description = A mysterious wormhole at the edge of the Kerbolar system. We're not sure how it got there or what its purpose is... but why not capitalise on the opportunity for cheap interstellar travel?
			radius = 10000
			geeASL = 8
			tidallyLocked = false
			rotationPeriod = 50000
			timewarpAltitudeLimits = 0 0 0 0 0 0 0 0
			maxZoom = 60000
			ScienceValues
			{
				landedDataValue = 5 // Science multiplier for landed science.
				splashedDataValue = 1 // Science multiplier for splashed down science.
				flyingLowDataValue = 1 // Science multiplier for flying low science.
				flyingHighDataValue = 1 // Science multiplier for flying high science.
				inSpaceLowDataValue = 4 // Science multiplier for in space low science.
				inSpaceHighDataValue = 2.5 // Science multiplier for in space high science.
				recoveryValue = 2.5
				flyingAltitudeThreshold = 40000 // Altitude when "flying at <body>" transitions from/to "from <body>'s upper atmosphere"
				spaceAltitudeThreshold = 60000 // Altitude when "in space low" transitions from/to "in space high"
			}
			biomeMap = PromisedWorlds/_Systems/Tuun/PluginData/Black.png
			Biomes
			{
				Biome
				{
					name = Wormhole
					displayName = Wormhole
					value = 0
					color = #000000
				}
			}
		}
		Wormhole
		{
			partner = Borgal's Anomaly B
			influenceAltitude = 35000
			jumpMaxAltitude = 30000
			jumpMinAltitude = 10
			entryMessage = Entering the anomaly...
			exitMessage = Arriving at the Kerbolar system
			entryMsgDuration = 20
			exitMsgDuration = 10
			heatRate = 0.01
		}
		ScaledVersion
		{
			type = Vacuum
			fadeStart = 7000
			fadeEnd = 10000
			OnDemand
			{	
				texture = PromisedWorlds/_Systems/Tuun/PluginData/Black.png
				normals = PromisedWorlds/_Systems/Tuun/PluginData/Blank_Normal.dds
			}
			Material
			{
				color = 1,1,1,1
				specColor = 0.05,0.05,0.05,1
				shininess = 1
				
			}
		}
		Orbit
		{
			referenceBody = Eeloo
			inclination = 49
			eccentricity = 0.3
			semiMajorAxis = 24210000
			longitudeOfAscendingNode = 78
			argumentOfPeriapsis = 38
			epoch = 0
			color = 0.2,0.2,0.2,0.2
		}
		
		PQS
		{
			Mods
			{			
				VertexHeightMap
				{
					map = PromisedWorlds/_Systems/Tuun/PluginData/Black.png
					offset = -9999
					deformity = 0
					scaleDeformityByRadius = False
					order = 10
					enabled = True
				}
				VertexColorMap
				{
					map = PromisedWorlds/_Systems/Tuun/PluginData/Black.png
					order = 90
					enabled = True
					name = VertexColorMap
					index = 0
				} 
			}
		}
		
	}
}

// If Debdeb is installed as well, reconfigure the wormhole to go between Dorau and Puf. Placed in a more challenging near-polar orbit around Dorau.
@Kopernicus:AFTER[PromisedWorlds/_Systems/Debdeb]
{
	@Body[Borgal's?Anomaly?A]
	{
		@Properties
		{
			%description = A mysterious wormhole around the frigid planet Dorau, linking the Debdeb system to some place far away.
		}
		@Wormhole
		{
			%exitMessage = Arriving at the Debdeb system
		}
		@Orbit
		{
			%referenceBody = Dorau
			%semiMajorAxis = 2000000
			%inclination = 78
		}
	}
}

@Kopernicus:AFTER[OPM]:NEEDS[!PromisedWorlds/_Systems/Debdeb]
{
	@Body[Borgal's?Anomaly?A]
	{
		@Orbit
		{
			%referenceBody = Plock
			%semiMajorAxis = 31210000
		}
	}
}

@Kopernicus:AFTER[CelestialHarmony]:NEEDS[!PromisedWorlds/_Systems/Debdeb]
{
	@Body[Borgal's?Anomaly?A]
	{
		@Orbit
		{
			%referenceBody = Gaia
			%semiMajorAxis = 20940790
		}
	}
}

@Kopernicus:AFTER[RealSolarSystem]
{
	@Body[WH3142A]
	{
		@Orbit
		{
			%referenceBody = Pluto
			%semiMajorAxis = 98765000
		}
	}
}

@Kopernicus:AFTER[KSRSS]
{
	@Body[WH3142A]
	{
		@Orbit
		{
			%referenceBody = Pluto
			%semiMajorAxis = 98765000
		}
	}
}

@Kopernicus:LAST[Kopernicus]:HAS[!Body[Eeloo]]:NEEDS[!RealSolarSystem,!KSRSS]
{
	@Body[WH3141A]
	{
		@Orbit
		{
			%referenceBody = Sun
			%semiMajorAxis = 5.329834E10
		}
	}
}
